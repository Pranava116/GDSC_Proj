## Karthik_proj Documentation

This project provides a simple Flask application that interacts with Google's Gemini API to generate text based on given prompts.

### Project Overview

This project aims to provide an easy-to-use interface for interacting with the Gemini-2.0-flash model via a web service. It utilizes the Flask framework for creating the web application and leverages the `requests` library to make API calls to Gemini.  Error handling and retries are implemented to ensure robustness.

### Installation/Setup

1. **Clone the Repository:** Clone this repository to your local machine using `git clone <repository_url>`.
2. **Create Virtual Environment (Recommended):** Create a virtual environment to isolate project dependencies:
   ```bash
   python3 -m venv .venv 
   source .venv/bin/activate  # Activate on Linux/macOS
   .venv\Scripts\activate  # Activate on Windows
   ```
3. **Install Dependencies:** Install the necessary packages:
   ```bash
   pip install -r requirements.txt
   ```
4. **Set Environment Variables:** Create a `.env` file in the root directory of the project and set the `GEMINI_API_KEY` variable:
   ```
   GEMINI_API_KEY=<your_gemini_api_key>
   ```
5. **Run the Application:** Start the Flask development server:
   ```bash
   flask run
   ```

### Tech Stack

* **Python:** The primary programming language.
* **Flask:** A lightweight web framework for creating the web application.
* **requests:** Library for making HTTP requests to the Gemini API.
* **Flask-CORS:**  Enables Cross-Origin Resource Sharing (CORS), allowing requests from different domains.
* **python-dotenv:**  Loads environment variables from the `.env` file.
* **Google Gemini API:**  The underlying language model used for text generation.



### Feature List

* **Prompt-based Text Generation:** Sends prompts to the Gemini API and returns the generated text.
* **Error Handling:** Includes basic error handling and retries to manage API request failures.
* **Environment Variable Support:** Securely stores the Gemini API key in a `.env` file.
* **CORS Enabled:** Allows cross-origin requests, facilitating usage from different domains.


### Code Architecture

The project consists of a single `app.py` file that contains the entire Flask application logic.  The key components are:

- **`load_dotenv()`:** Loads environment variables, including the Gemini API key.
- **`call_gemini(prompt, max_retries=5)`:**  This function handles the interaction with the Gemini API.  It constructs the API request, sends it to Gemini, and processes the response.  It also includes retry logic to handle transient errors.
- **Flask Routes (Missing from provided code):**  The provided code snippet doesn't include any Flask routes. You'll need to add routes to handle incoming requests, extract the prompt from the request, call `call_gemini()`, and return the generated text as a response.  An example is provided below in the Usage Examples section.


### Usage Examples


**Example Flask Route (Add this to `app.py`):**

```python
@app.route('/generate', methods=['POST'])
def generate_text():
    data = request.get_json()
    prompt = data.get('prompt')
    if not prompt:
        return jsonify({'error': 'Prompt is required'}), 400

    try:
        generated_text = call_gemini(prompt)
        return jsonify({'generated_text': generated_text}), 200
    except Exception as e:
        return jsonify({'error': str(e)}), 500
```


**Making a request (using curl):**

```bash
curl -X POST -H "Content-Type: application/json" -d '{"prompt": "Write a short story about a robot learning to love."}' http://127.0.0.1:5000/generate
```


### APIs or Functions Explained

- **`call_gemini(prompt, max_retries=5)`:**
    - Takes a `prompt` string as input.
    - Constructs the JSON payload required by the Gemini API.
    - Sends a POST request to the Gemini API using the `requests` library.
    - Includes retry logic with exponential backoff (up to `max_retries` attempts) in case of API errors.
    - Parses the JSON response from Gemini and returns the generated text.
    - Raises an exception if the API call fails after multiple retries or if the response format is unexpected.



This enhanced documentation provides a more complete overview of the project, including setup instructions, tech stack details, feature list, code architecture explanation, usage examples, and API function documentation.  Remember to add the example Flask route to your `app.py` to make the application functional.  Also, ensure that you replace the placeholder API key with your actual Gemini API key.  Consider adding more robust error handling and input validation for production use.
