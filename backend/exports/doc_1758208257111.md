# Docify Backend Documentation

## Project Overview

Docify is a backend service that automatically generates documentation for GitHub repositories.  It leverages a large language model (LLM) to analyze the repository's code, README, and other files to create structured documentation covering various aspects of the project. The generated documentation includes sections on Project Overview, Installation/Setup, Tech Stack, Feature List, Code Architecture, Usage Examples, and APIs or Functions Explained.  The documentation can be downloaded in various formats (currently supporting at least Markdown).

## Installation/Setup

1. **Clone the repository:**
   ```bash
   git clone <repository_url>
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```  or  ```bash
   yarn install
   ```

3. **Set up environment variables:** Create a `.env` file in the root directory and add your Gemini API key:
   ```
   GEMINI_API_KEY=<your_gemini_api_key>
   ```

4. **Start the server:**
   ```bash
   npm start
   ``` or ```bash
   yarn start
   ```


## Tech Stack

* **Backend:** Node.js, Express.js
* **Database:** No persistent database is used; data is processed in-memory.
* **LMM:** Google Gemini Pro (via the Google Generative AI API)
* **Utilities:**  `cors`, `path`, `url`, `dotenv`
* **Git Integration:**  Utilizes custom functions (`cloneRepo`, `cleanUp`) to interact with Git repositories.


## Feature List

* **GitHub Repository Parsing:** Clones and parses GitHub repositories to extract relevant information (README, code files).
* **AI-Powered Documentation Generation:** Uses Google Gemini Pro to generate structured documentation based on the parsed data.
* **Multiple Export Formats:** Allows for documentation export in various formats (at least Markdown).
* **Error Handling:** Includes basic error handling for invalid GitHub URLs and API requests.


## Code Architecture

The application follows a RESTful API architecture.  The main components are:

* **`app.js`:** The main server file, setting up middleware (CORS, JSON parsing) and routing.
* **`docifyRoutes.js`:** Defines the API routes:
    * `/api/docify/generate`: POST endpoint to trigger documentation generation.  Accepts a `repoUrl` and optional `exportFormat`.
    * `/api/docify/download/:filename`: GET endpoint to download the generated documentation file.
* **`docifyController.js`:** Contains the business logic for generating and downloading documentation.  This interacts with utility functions to clone the repo, parse the data, invoke the LLM, and export the results.
* **`utils` Directory:** Contains helper functions for:
    * **`gitUtils.js`:**  `cloneRepo`, `cleanUp` (for cloning and cleaning up the local repository clone).
    * **`parseUtils.js`:** `parseRepo` (for parsing repository data).
    * **`aiUtils.js`:** `generateAIContent` (for interacting with the Gemini API).
    * **`exportUtils.js`:** `exportDocs` (for exporting documentation in various formats).


## Usage Examples

**Generating Documentation:**

Send a POST request to `/api/docify/generate` with the following JSON payload:

```json
{
  "repoUrl": "https://github.com/user/repo",
  "exportFormat": "md" // Optional, defaults to 'md'
}
```

The response will contain a JSON object with a success message and (likely) a download URL.

**Downloading Documentation:**

Once the documentation is generated, a GET request to `/api/docify/download/:filename` will download the generated documentation file.  The filename will be provided in the response from the `/generate` endpoint.


## APIs or Functions Explained

**`generateAIContent({ readme, files })`:** (in `aiUtils.js`) This function is the core of the documentation generation process.  It takes a README and a list of files as input, constructs a prompt for the Gemini API, sends the prompt, and returns the generated documentation text.

**`generateDocumentation(req, res)`:** (in `docifyController.js`) This function handles the `/api/docify/generate` route. It extracts the repository URL and export format from the request, clones the repository, parses the repository data, calls `generateAIContent` to generate documentation using the LLM, exports the documentation, and sends the appropriate response to the client.

**`downloadFile(req, res)`:** (in `docifyController.js`) This function handles the `/api/docify/download/:filename` route, serving the generated documentation file to the client.

**`cloneRepo(repoUrl, repoName)`:** (in `gitUtils.js`) Clones a GitHub repository to a local directory.

**`cleanUp(localPath)`:** (in `gitUtils.js`) Removes the local repository clone after processing.

**`parseRepo(localPath)`:** (in `parseUtils.js`) Parses the repository's README and code files to extract relevant data.

**`exportDocs(aiResponse, exportFormat)`:** (in `exportUtils.js`) Exports the generated documentation to the specified format.  (Implementation details are not provided in the given code).


This documentation provides a comprehensive overview of the Docify backend service.  Further details can be obtained by examining the source code.
